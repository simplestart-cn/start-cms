(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-219d2693"],{"6a5e":function(t,e,a){"use strict";a("92f3")},"92f3":function(t,e,a){},9406:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("el-row",{attrs:{gutter:10}},t._l(t.list,(function(e,r){return a("el-col",{directives:[{name:"auth",rawName:"v-auth",value:e.auth,expression:"item.auth"}],key:r,staticClass:"dashboard",attrs:{span:e.col}},[a("div",{staticClass:"control"},[a("el-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:t.handleUpdate}},[a("i",{staticClass:"pointer el-icon-more"}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{index:r,action:"update"}}},[t._v("编辑")]),a("el-dropdown-item",{attrs:{command:{index:r,action:"hidden"}}},[t._v("隐藏")])],1)],1)],1),a("micro-app",{attrs:{name:e.name,url:t.getEntry(e),line:!1,"keep-alive":!0,baseRoute:"/web"},on:{beforemount:function(a){return t.beforeMount(e)},datachange:t.dataChange}})],1)})),1),a("el-dialog",{attrs:{title:t.temp.title,visible:t.formVisible,width:"500px"},on:{"update:visible":function(e){t.formVisible=e}}},[a("el-form",{attrs:{model:t.temp}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{attrs:{autocomplete:"off"},model:{value:t.temp.sort,callback:function(e){t.$set(t.temp,"sort",e)},expression:"temp.sort"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",e)},expression:"temp.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("55dd"),a("96cf"),a("1da1")),i=(a("7f7f"),a("7514"),a("ade3")),s=a("b775");function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s["a"])({url:"/core/dashboard/list",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/core/dashboard/update",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/core/dashboard/updateStatus",method:"post",data:t})}var d=a("2f62"),p=a("94a1");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"Dashboard",data:function(){return{temp:{},list:[],formVisible:!1}},computed:f({},Object(d["c"])(["apps","user","token","authorize"])),created:function(){var t=this;c().then((function(e){t.list=e.data}))},methods:{getEntry:function(t){var e=this.apps.find((function(e){return e.name==t.app}))||{};return"undefined"==typeof e?"/":-1==e.entry.indexOf("http")?window.location.origin+e.entry:e.entry},beforeMount:function(t){var e=this.apps.find((function(e){return e.name==t.app}))||{},a=t.route?{path:t.route}:{path:"/dashboard"};p["b"].setData(t.name,{app:e,route:a,user:this.user,token:this.token,authorize:this.authorize})},dataChange:function(t){var e=this,a=t.detail.data;a.route&&setTimeout((function(){e.$router.push({path:"/dashboard"})}),1e3),a.msg&&this.$store.dispatch("app/sendMsg",a.msg)},handleUpdate:function(t){var e=this.list[t.index];switch(t.action){case"update":this.temp=e,this.formVisible=!0;break;case"hidden":l({id:e.id,status:0}),this.list.splice(t.index,1);break;default:break}},handleSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u({id:this.temp.id,sort:this.temp.sort,title:this.temp.title,status:this.temp.status});case 2:e=t.sent,a=e.code,r=e.msg,a?this.$message.error(r):(this.$message.success(r),this.formVisible=!1);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},b=h,v=(a("6a5e"),a("2877")),w=Object(v["a"])(b,r,n,!1,null,"08e245d3",null);e["default"]=w.exports}}]);