(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d67e7c40"],{"21a3":function(e,t,a){"use strict";a.r(t),a.d(t,"formOption",(function(){return i})),a.d(t,"formRule",(function(){return o}));a("d9e2");var r=a("61f7");const i={form:{showMessage:!0,inlineMessage:!1,statusIcon:!0,validateOnRuleChange:!0,labelWidth:"80px",size:"small"},row:{gutter:10},submitBtn:!1,resetBtn:!1},o=[{type:"file-library",title:"头像",field:"avatar",value:"",props:{limit:1,multiple:!1,accept:"image/*",library:!1}},{type:"input",title:"登录账号",field:"account",props:{},validate:[{required:!0,message:"登录账户不能为空"},{validator:(e,t,a)=>{if(!Object(r["e"])(t))return a(new Error);a()},message:"账号格式是字母，数字，下划线，长度5-12位",trigger:"blur"}]},{type:"input",title:"登录密码",field:"password",props:{clearable:!0},validate:[{validator:(e,t,a)=>{if(t&&!Object(r["c"])(t))return a(new Error);a()},message:"密码格式是字母，数字，下划线，长度6-18位",trigger:"blur"}]},{type:"input",title:"重复密码",field:"repassword",props:{clearable:!0}},{type:"input",title:"真实姓名",field:"name",props:{clearable:!0}},{type:"input",title:"手机号码",field:"mobile",props:{disabled:!0,readonly:!0},validate:[{validator:(e,t,a)=>{if(t&&!Object(r["d"])(t))return a(new Error);a()},message:"手机号格式错误",trigger:"blur"}]},{type:"input",title:"邮箱地址",field:"email",props:{clearable:!0},validate:[{validator:(e,t,a)=>{if(t&&!Object(r["b"])(t))return a(new Error);a()},message:"邮箱格式错误",trigger:"blur"}]}]},"2e3d":function(e,t,a){},ab32:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"drawer-page inline"},[t("div",{staticClass:"drawer-content"},[t("el-tabs",{attrs:{"tab-position":"top"}},[t("el-tab-pane",{attrs:{label:"基本信息"}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{lg:12,md:24}},[t("form-create",{attrs:{rule:e.formRule,option:e.formOption},on:{mounted:e.formMounted},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1)],1)],1),t("div",{staticClass:"drawer-footer"},[t("el-button",{attrs:{loading:e.btnLoading,type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)])},i=[],o=a("21a3"),s=a("c24f"),l=(a("f382"),a("2f62"),{name:"UserEdit",data(){return{temp:{},model:{},formRule:o["formRule"],formOption:o["formOption"],btnLoading:!1,modelChange:!1}},watch:{"model.form":{handler(e){"undefined"!==typeof e&&(this.modelChange=!0)},immediate:!0,deep:!0}},created(){this.fetchCurrent()},methods:{fetchCurrent(e){this.btnLoading=!1,Object(s["c"])(e).then(e=>{if(0===e.code){const{data:t}=e;this.temp=t,this.model.setValue(t)}})},handleSubmit(){const e=e=>{0===e.code?(this.temp.id||(this.temp.id=e.data.id),this.$store.commit("SET_NAME",e.data.name),this.$store.commit("SET_ACCOUNT",e.data.account),this.$store.commit("SET_AVATAR",e.data.avatar),this.$store.commit("SET_MOBILE",e.data.mobile),this.$store.commit("SET_EMAIL",e.data.email),this.$message.success(e.msg)):this.$message.error(e.msg),this.btnLoading=!1},t=e=>{this.$message.error(e.message),this.btnLoading=!1};this.model.submit(a=>{Object(s["i"])(a).then(e).catch(t)})},formMounted(){}}}),n=l,d=(a("b4af"),a("2877")),m=Object(d["a"])(n,r,i,!1,null,"3bae10c2",null);t["default"]=m.exports},b4af:function(e,t,a){"use strict";a("2e3d")}}]);